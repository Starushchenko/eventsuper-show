"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function getInstThumbsByTag(e,n,i){var t="https://www.instagram.com/explore/tags/".concat(e,"/?__a=1");$.getJSON(t,{format:"json"}).done(function(e){var t=e.graphql.hashtag.edge_hashtag_to_media.edges.slice(0,n);$.each(t,function(e,t){var n='<a class="instagram__item-link wow fadeIn" data-wow-delay="0.'.concat(e+1,'s" data-wow-offset="50" href="https://www.instagram.com/p/').concat(t.node.shortcode,'/" target="_blank">\n\t\t\t\t\t\t<img class="instagram__image" src="').concat(t.node.thumbnail_resources[4].src,'" alt="').concat(t.node.edge_media_to_caption.edges[0]?t.node.edge_media_to_caption.edges[0].node.text.slice(0,70):"",'..." title="').concat(t.node.edge_media_to_caption.edges[0]?t.node.edge_media_to_caption.edges[0].node.text.slice(0,70):"",'...">\n\t\t\t\t </a>');i.append(n)})})}function doAnimations(e){e.each(function(){var e=$(this),t=e.data("delay"),n="animated "+e.data("animation");e.css({"animation-delay":t,"-webkit-animation-delay":t}),e.addClass(n).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.removeClass(n)})})}function scrollInstagramHandle(){var e=$(".instagram").offset().top,t=$(".instagram").offset().top+$(".instagram").outerHeight(),n=$(window).scrollTop()+$(window).innerHeight(),i=$(window).scrollTop();e<t&&i<n&&(getInstThumbsByTag("агентствокарамянц",4,$(".instagram__stage")),$(document).off("scroll",scrollInstagramHandle))}$(document).ready(function(){(new WOW).init(),setTimeout(function(){$("body").removeClass("loading"),$(".intro__transition-layer").addClass("visible opening"),setTimeout(function(){$(".intro__transition-layer").removeClass("opening visible"),$(".intro__transition-layer").off("webkitAnimationEnd oanimationend msAnimationEnd animationend")},1300)},2e3),/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)?(document.documentElement.className+=" old-browser",$(".intro__anim-svg path, .wedding__date-day path, .wedding__date-year path").css({strokeDasharray:"0"})):/Edge\/\d./i.test(navigator.userAgent)&&(document.documentElement.className+=" edge-browser"),$('input[type="tel"]').mask("+7 000 000-00-00"),$(".form select").niceSelect(),$(".lazy").lazy({effect:"fadeIn",effectTime:500,threshold:700}),$("[data-fancybox]").fancybox({buttons:["close"],loop:!0,helpers:{overlay:{locked:!1}}}),0!==$(".instagram").length&&$(document).on("scroll",scrollInstagramHandle)}),$(document).ready(function(){var e,t;0!==$(".page--index").length&&(e=document.querySelector(".intro__title"),t=document.querySelector(".intro__slogan"),e.innerHTML=e.textContent.replace(/\S/g,"<span class='letter'>$&</span>"),t.innerHTML=t.textContent.replace(/\S/g,"<span class='letter'>$&</span>"),$("html").scrollTop()<=100&&anime.timeline({loop:!1}).add({targets:".intro__bg",scale:[.9,1],easing:"easeOutQuart",duration:1700,delay:2100}).add({targets:".intro__logo .logo__grad-icon",opacity:[0,1],translateY:[25,0],translateX:[-10,0],rotate:[15,0],easing:"easeOutQuart",duration:1350},"-=700").add({targets:".intro__logo .logo__caption-agency",opacity:[0,1],translateY:[25,0],easing:"easeOutQuart",duration:1350},"-=1000").add({targets:".intro__logo .logo__caption-name",opacity:[0,1],translateY:[25,0],easing:"easeOutQuart",duration:1350},"-=1000").add({targets:".intro__logo-bg",opacity:[0,1],translateX:[60,0],translateY:[-140,0],rotate:[-15,0],easing:"easeOutQuart",duration:2250},"-=2000").add({targets:".intro__menu-trigger",opacity:[0,1],translateY:[-5,5,0],easing:"easeInOutQuad",duration:3050},"-=2500").add({targets:".page--index .header",opacity:[0,1],easing:"easeInOutQuad",duration:1250}).add({targets:".intro__title .letter",opacity:[0,1],rotate:[10,0],translateY:[15,0],easing:"easeInOutQuad",duration:800,delay:anime.stagger(30)},"-=5000").add({targets:".intro__slogan .letter",translateX:[40,0],translateZ:0,opacity:[0,1],easing:"easeOutExpo",duration:1200,delay:anime.stagger(50)},"-=5700").add({targets:".intro__video",translateY:[40,0],opacity:[0,1],easing:"easeOutExpo",duration:1200},"-=4000"));0!==$(".page--inner").length&&anime.timeline({loop:!1}).add({targets:".header__logo-bg",translateY:[-100,0],opacity:[0,1],easing:"easeOutQuart",duration:1700,delay:2100}).add({targets:".logo--mini",opacity:[0,1],translateY:[-25,0],easing:"easeOutQuart",duration:750},"-=700").add({targets:".header__call-me",opacity:[0,1],translateY:[-25,0],easing:"easeOutQuart",duration:550},"-=900").add({targets:".header__menu-trigger",opacity:[0,1],translateY:[-25,0],easing:"easeOutQuart",duration:550},"-=400")}),$(document).ready(function(a){var e=a(".js_menu-trigger"),n=a(".menu-modal__transition-layer"),o=n.children(),i=a(".menu-modal__popup"),r=1.78,s=!1;function t(){var e,t,n=a(window).width(),i=a(window).height();r<n/i?e=(t=n)/r:t=(e=1.2*i)*r,o.css({width:25*t+"px",height:e+"px"}),s=!1}t(),a(window).on("resize",function(){s||(s=!0,window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,300))}),e.on("click",function(e){e.preventDefault(),n.addClass("visible opening");var t=0<a(".no-cssanimations").length?0:600;setTimeout(function(){i.addClass("visible")},t)}),a(".intro__video").on("click",function(e){n.addClass("visible opening"),setTimeout(function(){n.addClass("closing"),o.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){n.removeClass("closing opening visible"),o.off("webkitAnimationEnd oanimationend msAnimationEnd animationend")})},1600)}),i.on("click",".menu-modal__close",function(e){e.preventDefault(),n.addClass("closing"),i.removeClass("visible"),o.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){n.removeClass("closing opening visible"),o.off("webkitAnimationEnd oanimationend msAnimationEnd animationend")})})}),$(document).ready(function(){$("[data-parallax]").each(function(){var $this=$(this),animetl=anime.timeline({autoplay:!1}),properties={targets:$this[0],easing:"linear"};$.each($this.attr("data-parallax").split(/[,\s]+(?={)/),function(i,value){$.extend(properties,eval("("+value+")"))}),animetl.add(properties);var parallaxSetup=function(){var e=$this[0].getBoundingClientRect(),t=$(window).height();e.top<t&&0<e.bottom?animetl.seek(animetl.duration*((t-e.top)/(t+e.height)).toFixed(3)):e.top>=t?animetl.seek(0):e.bottom<=0&&animetl.seek(animetl.duration)};$($this.attr("parallax-scroll")||window).on("resize scroll",parallaxSetup),setTimeout(parallaxSetup,50)})}),$(document).ready(function(){$(".reviews__slider").on("init",function(e,t){doAnimations($("div.reviews__slide:first-child").find("[data-animation]"))}),$(".reviews__slider").on("beforeChange",function(e,t,n,i){doAnimations($('div.reviews__slide[data-slick-index="'+i+'"]').find("[data-animation]"))}),$(".reviews__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,fade:!0,draggable:!0,dots:!1,adaptiveHeight:!0})});var MathUtils={map:function(e,t,n,i,a){return(e-t)*(a-i)/(n-t)+i},lerp:function(e,t,n){return(1-n)*e+n*t},getRandomFloat:function(e,t){return(Math.random()*(t-e)+e).toFixed(2)}},body=document.body,winsize,calcWinsize=function(){return winsize={width:window.innerWidth,height:window.innerHeight}},docScroll,lastScroll;calcWinsize(),window.addEventListener("resize",calcWinsize);var scrollingSpeed=0,getPageYScroll=function(){return docScroll=window.pageYOffset||document.documentElement.scrollTop};window.addEventListener("scroll",getPageYScroll);var Item=function(){function t(e){var i=this;_classCallCheck(this,t),this.DOM={el:e},this.DOM.image=this.DOM.el.querySelector(".portfolio-content__item-img"),this.DOM.imageWrapper=this.DOM.image.parentNode,this.DOM.el.style.perspective="1000px",this.DOM.imageWrapper.style.transformOrigin="50% 100%",this.ry=MathUtils.getRandomFloat(-.5,.5),this.rz=MathUtils.getRandomFloat(-.5,.5),this.DOM.title=this.DOM.el.querySelector(".portfolio-content__item-title"),this.DOM.title.style.transform="translate3d(0,0,200px)",this.renderedStyles={innerTranslationY:{previous:0,current:0,ease:.1,setValue:function(){var e=parseInt(getComputedStyle(i.DOM.image).getPropertyValue("--overflow"),10),t=-1*e;return Math.max(Math.min(MathUtils.map(i.props.top-docScroll,winsize.height,-1*i.props.height,t,e),e),t)}},itemRotation:{previous:0,current:0,ease:.1,toValue:Number(MathUtils.getRandomFloat(-70,-50)),setValue:function(){var e=i.renderedStyles.itemRotation.toValue,t=-1*e,n=MathUtils.map(i.props.top-docScroll,1.5*winsize.height,-1*i.props.height,t,e);return Math.min(Math.max(n,e),t)}}},this.getSize(),this.update(),this.observer=new IntersectionObserver(function(e){e.forEach(function(e){return i.isVisible=0<e.intersectionRatio})}),this.observer.observe(this.DOM.el),this.initEvents()}return _createClass(t,[{key:"update",value:function(){for(var e in this.renderedStyles)this.renderedStyles[e].current=this.renderedStyles[e].previous=this.renderedStyles[e].setValue();this.layout()}},{key:"getSize",value:function(){var e=this.DOM.el.getBoundingClientRect();this.props={height:e.height,top:docScroll+e.top}}},{key:"initEvents",value:function(){var e=this;window.addEventListener("resize",function(){return e.resize()})}},{key:"resize",value:function(){this.getSize(),this.update()}},{key:"render",value:function(){for(var e in this.renderedStyles)this.renderedStyles[e].current=this.renderedStyles[e].setValue(),this.renderedStyles[e].previous=MathUtils.lerp(this.renderedStyles[e].previous,this.renderedStyles[e].current,this.renderedStyles[e].ease);this.layout()}},{key:"layout",value:function(){this.DOM.image.style.transform="translate3d(0,".concat(this.renderedStyles.innerTranslationY.previous,"px,0)"),this.DOM.imageWrapper.style.transform="rotate3d(1,".concat(this.ry,",").concat(this.rz,",").concat(this.renderedStyles.itemRotation.previous,"deg)")}}]),t}(),SmoothScroll=function(){function e(){var t=this;_classCallCheck(this,e),this.DOM={main:document.querySelector("main")},this.DOM.scrollable=this.DOM.main.querySelector("div[data-scroll]"),this.items=[],this.DOM.content=this.DOM.main.querySelector(".portfolio-content"),_toConsumableArray(this.DOM.content.querySelectorAll(".portfolio-content__item")).forEach(function(e){return t.items.push(new Item(e))}),this.renderedStyles={translationY:{previous:0,current:0,ease:.1,setValue:function(){return docScroll}}},this.setSize(),this.update(),this.style(),this.initEvents(),requestAnimationFrame(function(){return t.render()})}return _createClass(e,[{key:"update",value:function(){for(var e in this.renderedStyles)this.renderedStyles[e].current=this.renderedStyles[e].previous=this.renderedStyles[e].setValue();this.layout()}},{key:"layout",value:function(){this.DOM.scrollable.style.transform="translate3d(0,".concat(-1*this.renderedStyles.translationY.previous,"px,0)")}},{key:"setSize",value:function(){body.style.height="".concat(this.DOM.scrollable.scrollHeight,"px")}},{key:"style",value:function(){this.DOM.main.style.position="fixed",this.DOM.main.style.width=this.DOM.main.style.height="100%",this.DOM.main.style.top=this.DOM.main.style.left=0,this.DOM.main.style.overflow="hidden"}},{key:"initEvents",value:function(){var e=this;window.addEventListener("resize",function(){return e.setSize()})}},{key:"render",value:function(){var e=this;for(var t in scrollingSpeed=Math.abs(docScroll-lastScroll),lastScroll=docScroll,this.renderedStyles)this.renderedStyles[t].current=this.renderedStyles[t].setValue(),this.renderedStyles[t].previous=MathUtils.lerp(this.renderedStyles[t].previous,this.renderedStyles[t].current,this.renderedStyles[t].ease);this.layout();var n=!0,i=!1,a=void 0;try{for(var o,r=this.items[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var s=o.value;s.isVisible?s.insideViewport?s.render():(s.insideViewport=!0,s.update()):s.insideViewport=!1}}catch(e){i=!0,a=e}finally{try{n||null==r.return||r.return()}finally{if(i)throw a}}requestAnimationFrame(function(){return e.render()})}}]),e}(),preloadImages=function(){return new Promise(function(e,t){imagesLoaded(document.querySelectorAll(".portfolio-content__item-img"),{background:!0},e)})};preloadImages().then(function(){document.body.classList.remove("loading"),getPageYScroll(),lastScroll=docScroll,new SmoothScroll}),$(".page--index")&&$(document).on("scroll",function(){$(document).scrollTop()<=0?$(".header").css("opacity",0):$(".header").css("opacity",1)}),$(document).on("scroll",function(){200<$(document).scrollTop()?$(".to-top").addClass("to-top--active"):$(".to-top").removeClass("to-top--active")}),$(".to-top").on("click",function(){$("html, body").animate({scrollTop:0})});